!function(){const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches,t=document.querySelector(".topbar");t&&window.addEventListener("scroll",()=>{window.scrollY>8?t.classList.add("nav-shadow"):t.classList.remove("nav-shadow")},{passive:!0});const o=document.querySelectorAll(".fade-on-scroll");if(e||!("IntersectionObserver"in window))o.forEach(e=>e.classList.add("show"));else{const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("show"),t.unobserve(e.target))})},{threshold:.14});o.forEach(t=>e.observe(t))}if(document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",o=>{const r=t.getAttribute("href");if(!r||"#"===r)return;const s=document.querySelector(r);if(!s)return;o.preventDefault(),s.scrollIntoView({behavior:e?"auto":"smooth",block:"start"});const n=document.getElementById("navMain");n&&n.classList.contains("show")&&window.bootstrap?.Collapse&&new bootstrap.Collapse(n,{toggle:!0})})}),location.hash){const t=document.querySelector(location.hash);t&&setTimeout(()=>{t.scrollIntoView({behavior:e?"auto":"smooth",block:"start"})},0)}(()=>{const e=document.querySelectorAll("#about .reveal-about");if(!e.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>e.classList.add("show"));const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("show"),t.unobserve(e.target))})},{threshold:.12});e.forEach((e,o)=>{e.style.transitionDelay=150*o+"ms",t.observe(e)})})()}(),function(){const e=document.querySelectorAll("#results .kpi-number");if(!e.length)return;const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches;document.querySelectorAll("#results .fade-on-scroll, #results .kpi-number");const o=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.contains("fade-on-scroll")&&e.target.classList.add("show"),e.target.classList.contains("kpi-number")&&(!function(e){const o=Number(e.dataset.target||0),r=e.dataset.suffix||"";if(t)return void(e.textContent=o+r);const s=performance.now();requestAnimationFrame(function t(n){const c=Math.min(1,(n-s)/1200),a=1-Math.pow(1-c,3),i=Math.round(0+(o-0)*a);e.textContent=i+r,c<1&&requestAnimationFrame(t)})}(e.target),o.unobserve(e.target)))})},{threshold:.18});let r=0;document.querySelectorAll("#results .fade-on-scroll").forEach(e=>{e.style.transitionDelay=r+"ms",r+=90,o.observe(e)}),e.forEach(e=>o.observe(e))}();const prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,fadeElements=document.querySelectorAll(".fade-on-scroll");if(prefersReducedMotion)fadeElements.forEach(e=>e.classList.add("show"));else{const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("show"),e.unobserve(t.target))})},{threshold:.14});fadeElements.forEach(t=>e.observe(t))}const counters=document.querySelectorAll(".kpi-number");let counterTriggered=!1;function animateCounters(){if(counterTriggered)return;document.querySelector(".section-results").getBoundingClientRect().top<window.innerHeight/1.2&&(counterTriggered=!0,counters.forEach(e=>{const t=parseFloat(e.getAttribute("data-target")),o=e.getAttribute("data-suffix")||"%";let r=0;const s=t/100,n=setInterval(()=>{r+=s,r>=t&&(r=t,clearInterval(n)),e.textContent=`${Math.round(r)}${o}`},1200/(t/s))}))}window.addEventListener("scroll",animateCounters),(()=>{const e=document.querySelectorAll("#commitment .fade-on-scroll");if(!e.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>e.classList.add("show"));let t=0;e.forEach(e=>{e.style.transitionDelay=`${t+=120}ms`})})(),document.getElementById("year").textContent=(new Date).getFullYear(),function(){const e=document.querySelector("#contact"),t=document.querySelector(".dock-hint");if(!e||!t)return;const o="knm_dock_hint_shown";if("1"===sessionStorage.getItem(o))return;const r=window.matchMedia("(prefers-reduced-motion: reduce)").matches,s=new IntersectionObserver(n=>{n.forEach(n=>{if(!n.isIntersecting)return;t.classList.add("is-visible");setTimeout(()=>t.classList.remove("is-visible"),r?1500:2600),sessionStorage.setItem(o,"1"),s.unobserve(e)})},{threshold:.35});s.observe(e)}();